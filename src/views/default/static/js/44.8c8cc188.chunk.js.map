{"version":3,"sources":["../node_modules/rc-util/es/Dom/css.js","views/app-views/villa/villa-detail/transaction-history/index.js"],"names":["getClientSize","width","document","documentElement","clientWidth","height","window","innerHeight","clientHeight","getOffset","node","box","getBoundingClientRect","docElem","left","pageXOffset","scrollLeft","clientLeft","body","top","pageYOffset","scrollTop","clientTop","TransactionHistory","connect","props","param","useParams","useState","limit","page","params","loading","setLoading","data","setData","useEffect","villa","order","ApiService","url","id","config","get","then","response","console","log","catch","err","columns","dataIndex","title","render","_","val","index","className","src","name","Utils","numberFormat","moment","format","dataSource"],"mappings":"mGAAA,oEAwEO,SAASA,IAGd,MAAO,CACLC,MAHUC,SAASC,gBAAgBC,YAInCC,OAHWC,OAAOC,aAAeL,SAASC,gBAAgBK,aAK9D,CAOO,SAASC,EAAUC,GACxB,IAAIC,EAAMD,EAAKE,wBACXC,EAAUX,SAASC,gBAGvB,MAAO,CACLW,KAAMH,EAAIG,MAAQR,OAAOS,aAAeF,EAAQG,aAAeH,EAAQI,YAAcf,SAASgB,KAAKD,YAAc,GACjHE,IAAKR,EAAIQ,KAAOb,OAAOc,aAAeP,EAAQQ,YAAcR,EAAQS,WAAapB,SAASgB,KAAKI,WAAa,GAEhH,C,gKCtFMC,EAAqBC,aAAQ,WAC/B,MAAO,CAAC,CACZ,GAAE,CAAC,EAFwBA,EAErB,SAASC,GAAO,IAAD,MACXC,EAAQC,cACd,EAA2BC,mBAAS,CAChCC,MAAM,GACNC,KAAK,IACP,mBAHKC,EAAM,KAIb,GAJuB,KAIMH,oBAAS,IAAM,mBAApCI,EAAO,KAACC,EAAU,KAC1B,EAAwBL,mBAAS,CAAC,GAAE,mBAA5BM,EAAI,KAACC,EAAO,KAEpBC,qBAAU,WACNH,GAAW,GACXE,EAAQ,2BACDD,GAAI,IACPG,MAAM,eACK,OAAJH,QAAI,IAAJA,OAAI,EAAJA,EAAMG,OAEbC,MAAM,MAEV,IAAIC,IAAW,CACXC,IAAI,iBAAD,OAAuB,OAALd,QAAK,IAALA,OAAK,EAALA,EAAOe,GAAE,gBAC9BC,OAAQ,CACJX,OAAO,eACAA,MAGZY,MACEC,MAAK,SAACC,GAAa,IAAD,EACfV,EAAQ,2BACO,OAARU,QAAQ,IAARA,OAAQ,EAARA,EAAUX,MAAI,IACjBI,MAAM,YAAa,OAARO,QAAQ,IAARA,GAAc,QAAN,EAARA,EAAUX,YAAI,WAAN,EAAR,EAAgBI,UAE/BL,GAAW,GACXa,QAAQC,IAAI,CAACF,YACjB,IACCG,OAAM,SAACC,GACJhB,GAAW,GACXE,EAAQ,2BACDD,GAAI,IACPG,MAAM,eACK,OAAJH,QAAI,IAAJA,OAAI,EAAJA,EAAMG,OAEbC,MAAM,MAEVQ,QAAQC,IAAI,CAACE,OACjB,GACR,GAAE,CAAClB,IAEH,IAAMmB,EAAU,CACZ,CACIC,UAAW,MACXC,MAAM,KACNC,OAAO,SAACC,EAAEC,EAAIC,GAAK,OAAIA,EAAQ,CAAC,GAEpC,CACIL,UAAW,OACXC,MAAM,OACNC,OAAO,SAACC,GAAM,IAAD,EACT,OACI,sBAAKG,UAAU,mBAAkB,UAC7B,cAAC,IAAM,CAACC,IAAK,KAAMD,UAAW,SAC9B,+BAAc,QAAd,EAAQ,OAADH,QAAC,IAADA,OAAC,EAADA,EAAGK,YAAI,QAAI,QAG9B,GAEJ,CACIR,UAAW,eACXC,MAAM,gBAEV,CACID,UAAU,SACVC,MAAM,UAEV,CACID,UAAU,QACVC,MAAO,SAEX,CACID,UAAW,SACXC,MAAM,SACNC,OAAO,SAACC,GAAC,OAAIM,IAAMC,aAAaP,EAAE,IAAI,GAE1C,CACIH,UAAW,YACXC,MAAM,UACNC,OAAO,SAACC,GAAC,OAAIQ,IAAOR,GAAQQ,OAAUC,OAAO,cAAc,IAInE,OACI,cAAC,IAAI,CAACX,MAAQpB,EAAqD,IAA1B,QAApB,EAAO,OAAJE,QAAI,IAAJA,GAAW,QAAP,EAAJA,EAAMG,aAAK,WAAP,EAAJ,EAAasB,YAAI,QAAI,sBAA2BF,UAAU,SAAQ,SACtF,cAAC,IAAK,CACFA,UAAW,mBACXzB,QAASA,EACTgC,WAAuB,QAAb,EAAM,OAAJ9B,QAAI,IAAJA,OAAI,EAAJA,EAAMI,aAAK,QAAI,GAC3BY,QAASA,KAIzB,IAEe3B,W","file":"static/js/44.8c8cc188.chunk.js","sourcesContent":["/* eslint-disable no-nested-ternary */\nvar PIXEL_PATTERN = /margin|padding|width|height|max|min|offset/;\nvar removePixel = {\n  left: true,\n  top: true\n};\nvar floatMap = {\n  cssFloat: 1,\n  styleFloat: 1,\n  float: 1\n};\nfunction getComputedStyle(node) {\n  return node.nodeType === 1 ? node.ownerDocument.defaultView.getComputedStyle(node, null) : {};\n}\nfunction getStyleValue(node, type, value) {\n  type = type.toLowerCase();\n  if (value === 'auto') {\n    if (type === 'height') {\n      return node.offsetHeight;\n    }\n    if (type === 'width') {\n      return node.offsetWidth;\n    }\n  }\n  if (!(type in removePixel)) {\n    removePixel[type] = PIXEL_PATTERN.test(type);\n  }\n  return removePixel[type] ? parseFloat(value) || 0 : value;\n}\nexport function get(node, name) {\n  var length = arguments.length;\n  var style = getComputedStyle(node);\n  name = floatMap[name] ? 'cssFloat' in node.style ? 'cssFloat' : 'styleFloat' : name;\n  return length === 1 ? style : getStyleValue(node, name, style[name] || node.style[name]);\n}\nexport function set(node, name, value) {\n  var length = arguments.length;\n  name = floatMap[name] ? 'cssFloat' in node.style ? 'cssFloat' : 'styleFloat' : name;\n  if (length === 3) {\n    if (typeof value === 'number' && PIXEL_PATTERN.test(name)) {\n      value = \"\".concat(value, \"px\");\n    }\n    node.style[name] = value; // Number\n    return value;\n  }\n  for (var x in name) {\n    if (name.hasOwnProperty(x)) {\n      set(node, x, name[x]);\n    }\n  }\n  return getComputedStyle(node);\n}\nexport function getOuterWidth(el) {\n  if (el === document.body) {\n    return document.documentElement.clientWidth;\n  }\n  return el.offsetWidth;\n}\nexport function getOuterHeight(el) {\n  if (el === document.body) {\n    return window.innerHeight || document.documentElement.clientHeight;\n  }\n  return el.offsetHeight;\n}\nexport function getDocSize() {\n  var width = Math.max(document.documentElement.scrollWidth, document.body.scrollWidth);\n  var height = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);\n  return {\n    width: width,\n    height: height\n  };\n}\nexport function getClientSize() {\n  var width = document.documentElement.clientWidth;\n  var height = window.innerHeight || document.documentElement.clientHeight;\n  return {\n    width: width,\n    height: height\n  };\n}\nexport function getScroll() {\n  return {\n    scrollLeft: Math.max(document.documentElement.scrollLeft, document.body.scrollLeft),\n    scrollTop: Math.max(document.documentElement.scrollTop, document.body.scrollTop)\n  };\n}\nexport function getOffset(node) {\n  var box = node.getBoundingClientRect();\n  var docElem = document.documentElement;\n\n  // < ie8 不支持 win.pageXOffset, 则使用 docElem.scrollLeft\n  return {\n    left: box.left + (window.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || document.body.clientLeft || 0),\n    top: box.top + (window.pageYOffset || docElem.scrollTop) - (docElem.clientTop || document.body.clientTop || 0)\n  };\n}","import React, {useState, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { connect } from 'react-redux'\r\nimport {Avatar, Card, Table} from 'antd'\r\nimport ApiService from \"../../../../../services/Api.service\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport Utils from \"../../../../../utils\";\r\nimport moment from \"moment\";\r\n\r\nconst TransactionHistory = connect(()=> {\r\n    return {}\r\n},{})(function(props){\r\n    const param = useParams()\r\n    const [params,setParams] = useState({\r\n        limit:10,\r\n        page:1,\r\n    })\r\n    const [ loading,setLoading]= useState(false)\r\n    const [ data,setData] = useState({})\r\n\r\n    useEffect(()=> {\r\n        setLoading(true)\r\n        setData({\r\n            ...data,\r\n            villa:{\r\n                ...data?.villa\r\n            },\r\n            order:[]\r\n        })\r\n        new ApiService({\r\n            url:`/api/v2/villa/${param?.id}/transaction`,\r\n            config :{\r\n                params: {\r\n                    ...params\r\n                }\r\n            }\r\n        }).get()\r\n            .then((response)=> {\r\n                setData({\r\n                    ...response?.data,\r\n                    order: [...response?.data?.order]\r\n                })\r\n                setLoading(false)\r\n                console.log({response})\r\n            })\r\n            .catch((err)=> {\r\n                setLoading(false)\r\n                setData({\r\n                    ...data,\r\n                    villa:{\r\n                        ...data?.villa\r\n                    },\r\n                    order:[]\r\n                })\r\n                console.log({err})\r\n            })\r\n    },[params])\r\n\r\n    const columns = [\r\n        {\r\n            dataIndex: \"_id\",\r\n            title:\"No\",\r\n            render:(_,val,index)=> index + 1\r\n        },\r\n        {\r\n            dataIndex: \"room\",\r\n            title:\"Room\",\r\n            render:(_)=> {\r\n                return(\r\n                    <div className=\"w-full text-left\">\r\n                        <Avatar src={null} className={'mr-2'}/>\r\n                        <span>{_?.name ?? \"-\"}</span>\r\n                    </div>\r\n                )\r\n            }\r\n        },\r\n        {\r\n            dataIndex: \"order_number\",\r\n            title:\"Order Number\"\r\n        },\r\n        {\r\n            dataIndex:\"status\",\r\n            title:\"Status\"\r\n        },\r\n        {\r\n            dataIndex:\"limit\",\r\n            title: \"Limit\"\r\n        },\r\n        {\r\n            dataIndex: \"amount\",\r\n            title:\"Amount\",\r\n            render:(_)=> Utils.numberFormat(_,',')\r\n        },\r\n        {\r\n            dataIndex: \"createdAt\",\r\n            title:\"Created\",\r\n            render:(_)=> moment(_ ? _ : moment()).format(\"DD MMM YYYY\")\r\n        }\r\n    ]\r\n\r\n    return (\r\n        <Card title={!loading ? data?.villa?.name ?? \"History Transaction\":\"-\"} className=\"w-full\">\r\n            <Table\r\n                className={'table-responsive'}\r\n                loading={loading}\r\n                dataSource={data?.order ?? []}\r\n                columns={columns}\r\n            />\r\n        </Card>\r\n    )\r\n})\r\n\r\nexport default TransactionHistory"],"sourceRoot":""}